{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst PIXABEY_API = '41780713-d9d59fd8c4b13cd5ac9a220da';\nconst galleryEl = document.querySelector('.gallery');\nconst loaderWrapper = document.querySelector('.loader-wrapper');\nconst form = document.querySelector('.search-form');\nconst gallery = new SimpleLightbox('.gallery li a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet images = [];\n\nfunction searchImages(query) {\n  loaderWrapper.classList.add('is-active');\n  images = [];\n\n  return fetch(\n    `https://pixabay.com/api/?key=${PIXABEY_API}&q=${query}&image_type=photo&orientation=horizontal&pretty=true&safesearch=true&per_page=21`\n  )\n    .then(response => response.json())\n    .then(data => data.hits)\n    .catch(error => console.log(error))\n    .finally(() => loaderWrapper.classList.remove('is-active'));\n}\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  const searchQuery = document.querySelector('.search-form input').value;\n\n  if (searchQuery === '') {\n    return iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query',\n    });\n  }\n\n  const pixabayImages = await searchImages(searchQuery);\n\n  images.push(...pixabayImages);\n\n  const markup = images\n    .map(img => {\n      return `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${img.largeImageURL}\">\n            <img\n                class=\"gallery-image\"\n                src=\"${img.webformatURL}\"\n                alt=\"${img.tags}\"\n            />\n            </a>\n        </li>\n        `;\n    })\n    .join('');\n\n  galleryEl.innerHTML = markup;\n\n  if (pixabayImages.length === 0) {\n    return iziToast.error({\n      title: 'Error',\n      message: 'No images found for this request',\n    });\n  }\n\n  gallery.refresh();\n});\n"],"names":["PIXABEY_API","galleryEl","loaderWrapper","form","gallery","SimpleLightbox","images","searchImages","query","response","data","error","event","searchQuery","iziToast","pixabayImages","markup","img"],"mappings":"6vBAKA,MAAMA,EAAc,qCACdC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAgB,SAAS,cAAc,iBAAiB,EACxDC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,IAAIC,EAAe,gBAAiB,CAClD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,IAAIC,EAAS,CAAA,EAEb,SAASC,EAAaC,EAAO,CAC3B,OAAAN,EAAc,UAAU,IAAI,WAAW,EACvCI,EAAS,CAAA,EAEF,MACL,gCAAgCN,OAAiBQ,mFAClD,EACE,KAAKC,GAAYA,EAAS,MAAM,EAChC,KAAKC,GAAQA,EAAK,IAAI,EACtB,MAAMC,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACjC,QAAQ,IAAMT,EAAc,UAAU,OAAO,WAAW,CAAC,CAC9D,CAEAC,EAAK,iBAAiB,SAAU,MAAMS,GAAS,CAC7CA,EAAM,eAAc,EAEpB,MAAMC,EAAc,SAAS,cAAc,oBAAoB,EAAE,MAEjE,GAAIA,IAAgB,GAClB,OAAOC,EAAS,MAAM,CACpB,MAAO,QACP,QAAS,6BACf,CAAK,EAGH,MAAMC,EAAgB,MAAMR,EAAaM,CAAW,EAEpDP,EAAO,KAAK,GAAGS,CAAa,EAE5B,MAAMC,EAASV,EACZ,IAAIW,GACI;AAAA;AAAA,4CAE+BA,EAAI;AAAA;AAAA;AAAA,uBAGzBA,EAAI;AAAA,uBACJA,EAAI;AAAA;AAAA;AAAA;AAAA,SAKtB,EACA,KAAK,EAAE,EAIV,GAFAhB,EAAU,UAAYe,EAElBD,EAAc,SAAW,EAC3B,OAAOD,EAAS,MAAM,CACpB,MAAO,QACP,QAAS,kCACf,CAAK,EAGHV,EAAQ,QAAO,CACjB,CAAC"}